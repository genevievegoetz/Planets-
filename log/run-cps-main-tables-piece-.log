------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Genna\OneDrive\Documents\ECON 580 Replication\ggn-replication-kit\do\../log/run-cps-main-tables-piece-.log
  log type:  text
 opened on:  23 Feb 2024, 12:55:01

. 
. /* --------------------------------------
> 
> This program runs simple regressions
> for the Tennessee policy experiment.
> 
> --------------------------------------- */
. 
. clear all

. estimates clear

. set mem 500m
set memory ignored.
    Memory no longer needs to be set in modern Statas; memory adjustments are performed on the fly automatically.

. set matsize 10000

. set linesize 200

. describe, short

Contains data
 Observations:             0                  
    Variables:             0                  
Sorted by: 

. 
. *global Niterations = 500
. global Niterations = 20

. 
. ************************************************************
. **   Prepare CPS outcomes
. ************************************************************
. 
. **
. ** Option 13, below, prepares the micro data, and does nothing else.
. **
. do fragment-prepare-cps-data.do 13

. use ../src/cps_00013.dta, clear

. d, f

Contains data from ../src/cps_00013.dta
 Observations:     4,723,421                  
    Variables:            88                  15 Feb 2024 10:29
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
year            int     %8.0g                 Survey year
serial          long    %12.0g                Household serial number
hwtsupp         float   %10.4f     hwtsupp_lbl
                                              Household weight, Supplement
region          byte    %27.0g     region_lbl
                                              Region and division
statefip        byte    %57.0g     statefip_lbl
                                              State (FIPS code)
metro           byte    %27.0g     metro_lbl
                                              Metropolitan central city status
metarea         int     %50.0g     metarea_lbl
                                              Metropolitan area
month           byte    %9.0g      month_lbl
                                              Month
wtsupp          float   %10.4f                Supplement Weight
hinswt          double  %9.0f                 Summary health insurance weight
sploc           byte    %8.0g                 Spouse's location in household
sprule          byte    %74.0g     sprule_lbl
                                              Rule for linking spouse
nchild          byte    %18.0g     nchild_lbl
                                              Number of own children in household
eldch           byte    %20.0g     eldch_lbl
                                              Age of eldest own child in household
relate          int     %34.0g     relate_lbl
                                              Relationship to household head
age             byte    %19.0g     age_lbl    Age
sex             byte    %8.0g      sex_lbl    Sex
race            int     %37.0g     race_lbl   Race
marst           byte    %23.0g     marst_lbl
                                              Marital status
citizen         byte    %31.0g     citizen_lbl
                                              Citizenship status
educ            int     %51.0g     educ_lbl   Educational attainment recode
higrade         int     %31.0g     higrade_lbl
                                              Highest grade of school
educ99          byte    %47.0g     educ99_lbl
                                              Educational attainment, 1990
empstat         byte    %30.0g     empstat_lbl
                                              Employment status
labforce        byte    %26.0g     labforce_lbl
                                              Labor force status
occ             int     %8.0g      occ_lbl    Occupation
occ1990         int     %78.0g     occ1990_lbl
                                              Occupation, 1990 basis
occ1950         int     %60.0g     occ1950_lbl
                                              Occupation, 1950 basis
ind             int     %8.0g      ind_lbl    Industry
ind1950         int     %57.0g     ind1950_lbl
                                              Industry, 1950 basis
wkswork1        byte    %8.0g      wkswork1_lbl
                                              Weeks worked last year
wkswork2        byte    %12.0g     wkswork2_lbl
                                              Weeks worked last year, intervalled
hrswork         byte    %8.0g      hrswork_lbl
                                              Hours worked last week
uhrswork        byte    %13.0g     uhrswork_lbl
                                              Usual hours worked per week (last yr)
hourwage        int     %8.0g                 Hourly wage
paidhour        byte    %8.0g      paidhour_lbl
                                              Paid by the hour
union           byte    %33.0g     union_lbl
                                              Union membership
firmsize        byte    %10.0g     firmsize_lbl
                                              Number of employees
ftotval         double  %10.0f     ftotval_lbl
                                              Total family income
inctot          double  %8.0f      inctot_lbl
                                              Total personal income
incwage         long    %12.0g     incwage_lbl
                                              Wage and salary income
earnweek        int     %8.0g                 Weekly earnings
poverty         byte    %42.0g     poverty_lbl
                                              Official poverty status
cutoff          long    %12.0g                Cutoff for offical poverty status, in dollars
disabwrk        byte    %34.0g     disabwrk_lbl
                                              Work disability
health          byte    %9.0g      health_lbl
                                              Health status
migsta1         byte    %20.0g     migsta1_lbl
                                              State of residence 1 year ago
migrate1        byte    %36.0g     migrate1_lbl
                                              Migration status, 1 year
hcovany         byte    %11.0g     hcovany_lbl
                                              Any insurance, public or private (summary)
hcovpriv        byte    %11.0g     hcovpriv_lbl
                                              Any private insurance (summary)
hinsemp         byte    %11.0g     hinsemp_lbl
                                              Employer-sponsored insurance (summary)
hinspur         byte    %11.0g     hinspur_lbl
                                              Individually purchased insurance (summary)
hcovpub         byte    %11.0g     hcovpub_lbl
                                              Any public insurance (summary)
hinscaid        byte    %11.0g     hinscaid_lbl
                                              Any Medicaid/SCHIP/other public insurance (summary)
hinscare        byte    %11.0g     hinscare_lbl
                                              Medicare coverage (summary)
hinsmil         byte    %11.0g     hinsmil_lbl
                                              Any military insurance (summary)
inclugh         byte    %8.0g      inclugh_lbl
                                              Included in employer group health plan last year
paidgh          byte    %18.0g     paidgh_lbl
                                              Employer paid for group health plan
emcontrb        int     %8.0g      emcontrb_lbl
                                              Employer contribution for health insurance
himcaid         byte    %8.0g      himcaid_lbl
                                              Covered by Medicaid last year
himcare         byte    %8.0g      himcare_lbl
                                              Covered by Medicare last year
hichamp         byte    %8.0g      hichamp_lbl
                                              Covered by military health insurance last year
phinsur         byte    %8.0g      phinsur_lbl
                                              Reported covered by private health insurance last year
phiown          byte    %8.0g      phiown_lbl
                                              Private health insurance in own name last year
caid            byte    %8.0g      caid_lbl   Covered by Medicaid last year
care            byte    %8.0g      care_lbl   Covered by Medicare last year
champus         byte    %8.0g      champus_lbl
                                              Covered by Champus/Tricare last year
champva         byte    %8.0g      champva_lbl
                                              Covered by CHAMPVA last year
militva         byte    %37.0g     militva_lbl
                                              Covered by VA or Military health care last year
indianh         byte    %8.0g      indianh_lbl
                                              Covered by Indian Health Service last year
groupown        byte    %8.0g      groupown_lbl
                                              Policyholder for employment-based insurance last year
groupdep        byte    %8.0g      groupdep_lbl
                                              Dependent covered by employment-based insurance last year
privown         byte    %8.0g      privown_lbl
                                              Policyholder for privately-purchased insurance last year
privdep         byte    %8.0g      privdep_lbl
                                              Dependent covered by privately-purchased insurance last year
grouptyp        byte    %17.0g     grouptyp_lbl
                                              Type of employment-based coverage last year
privtyp         byte    %17.0g     privtyp_lbl
                                              Type of privately-purchased coverage last year
grpwho1         byte    %44.0g     grpwho1_lbl
                                              Line number of first policyholder of employment-based insurance
grpwho2         byte    %44.0g     grpwho2_lbl
                                              Line number of second policyholder of employment-based insurance
privwho1        byte    %46.0g     privwho1_lbl
                                              Line number of first policyholder of privately-purchased insurance
privwho2        byte    %46.0g     privwho2_lbl
                                              Line number of second policyholder of privately-purchased insurance
mocaid          byte    %8.0g      mocaid_lbl
                                              Months of Medicaid coverage last year
schip           byte    %8.0g      schip_lbl
                                              State Children's Health Insurance Program coverage last year
verify          byte    %13.0g     verify_lbl
                                              Verification: Did individual actually have health insurance
groupout        byte    %8.0g      groupout_lbl
                                              Employment-based insurance covered non-household member
privout         byte    %8.0g      privout_lbl
                                              Privately-purchased insurance covered non-household member
out             byte    %8.0g      out_lbl    Covered by policy of person outside the household
covergh         byte    %8.0g      covergh_lbl
                                              Covered by group health insurance, last year
coverpi         byte    %8.0g      coverpi_lbl
                                              Covered by private health insurance, last year
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Sorted by: 

. 
. ************************************************************
. **   Restrict to South and key years
. ************************************************************
. 
. if (`1' > 0 & `1' < 13) {
.         gen south = ///
>          (statefip == 54 | ///
>           statefip == 21 | statefip == 47 | ///
>           statefip == 37 | statefip == 51 | statefip == 45 | statefip == 13 | ///
>           statefip ==  5 | statefip == 22 | statefip == 48 | statefip == 40 | ///
>           statefip ==  1 | statefip == 28 | statefip == 12 )
.         
.         keep if south == 1
.         keep if year >= 1999 & year <= 2013
. }

. 
. 
. ************************************************************
. **   Identify those with kids
. ************************************************************
. 
. sort year serial

. merge year serial using ../dta/cps_yngch.dta, uniqusing
(you are using old merge syntax; see [D] merge for new syntax)
variables year serial do not uniquely identify observations in the master data

. tab year _merge, missing

    Survey |        _merge
      year |         1          3 |     Total
-----------+----------------------+----------
      1986 |   157,661          0 |   157,661 
      1987 |   155,468          0 |   155,468 
      1988 |   155,980          0 |   155,980 
      1989 |   144,687          0 |   144,687 
      1990 |   158,079          0 |   158,079 
      1991 |   158,477          0 |   158,477 
      1992 |   155,796          0 |   155,796 
      1993 |   155,197          0 |   155,197 
      1994 |   150,943          0 |   150,943 
      1995 |   149,642          0 |   149,642 
      1996 |   130,476          0 |   130,476 
      1997 |   131,854          0 |   131,854 
      1998 |   131,617          0 |   131,617 
      1999 |   132,324          0 |   132,324 
      2000 |    92,832     40,878 |   133,710 
      2001 |   155,382     62,887 |   218,269 
      2002 |   154,402     62,817 |   217,219 
      2003 |   153,556     62,868 |   216,424 
      2004 |   151,486     61,755 |   213,241 
      2005 |   146,802     63,846 |   210,648 
      2006 |   143,672     64,890 |   208,562 
      2007 |   142,003     64,636 |   206,639 
      2008 |   141,342     65,062 |   206,404 
      2009 |   142,982     64,939 |   207,921 
      2010 |   143,713     66,089 |   209,802 
      2011 |   140,150     64,833 |   204,983 
      2012 |   137,752     63,646 |   201,398 
-----------+----------------------+----------
     Total | 3,914,275    809,146 | 4,723,421 

. assert _merge != 2 if year >= 2000

. drop _merge

. gen own_kid = yngch < 18

. 
. sort year serial age

. by year serial: gen min_age = age[1]

. by year serial: gen max_age = age[_N]

. summ min_age ,det

                           min_age
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            1              0       Obs           4,723,421
25%            4              0       Sum of wgt.   4,723,421

50%           13                      Mean           21.60281
                        Largest       Std. dev.      22.54444
75%           31             99
90%           61             99       Variance        508.252
95%           70             99       Skewness       1.175761
99%           80             99       Kurtosis       3.207245

. gen kid = (min_age < 18)

. 
. replace inctot = . if inctot == 99999999 
(1,132,597 real changes made, 1,132,597 to missing)

. replace inctot = . if inctot == 99999998 
(0 real changes made)

. 
. ************************************************************
. **   Restrictions on age and education
. ************************************************************
. 
. if (`1' == 11) {
.         keep if age >= 66
.         keep if educ <= 111
. }

. if (`1' != 11 & `1' != 13) {
.         keep if age >= 21 & age < 65
.         keep if educ <= 111
. }

. if (`1' == 13) {
.         keep if educ <= 111
(266,082 observations deleted)
. }

. 
. ************************************************************
. **   Create key variables
. ************************************************************
. 
. gen any_ind = (hinspur == 2)

. 
. gen has_spouse = (sploc != 0)

. 
. ** Impose no private h.i. if on Medicaid for 2003
. gen verifs = (himcaid == 2 & hcovpriv == 2)

. bys year: tab verifs if statefip == 47, missing

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1986

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,679      100.00      100.00
------------+-----------------------------------
      Total |      1,679      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1987

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,728      100.00      100.00
------------+-----------------------------------
      Total |      1,728      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1988

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,697       98.95       98.95
          1 |         18        1.05      100.00
------------+-----------------------------------
      Total |      1,715      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1989

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,744       98.09       98.09
          1 |         34        1.91      100.00
------------+-----------------------------------
      Total |      1,778      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1990

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,690       98.54       98.54
          1 |         25        1.46      100.00
------------+-----------------------------------
      Total |      1,715      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1991

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,743       98.25       98.25
          1 |         31        1.75      100.00
------------+-----------------------------------
      Total |      1,774      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1992

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,804       97.83       97.83
          1 |         40        2.17      100.00
------------+-----------------------------------
      Total |      1,844      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1993

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,819       96.35       96.35
          1 |         69        3.65      100.00
------------+-----------------------------------
      Total |      1,888      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1994

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,649       96.83       96.83
          1 |         54        3.17      100.00
------------+-----------------------------------
      Total |      1,703      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1995

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,490       94.07       94.07
          1 |         94        5.93      100.00
------------+-----------------------------------
      Total |      1,584      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1996

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,450       95.21       95.21
          1 |         73        4.79      100.00
------------+-----------------------------------
      Total |      1,523      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1997

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,475       93.24       93.24
          1 |        107        6.76      100.00
------------+-----------------------------------
      Total |      1,582      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1998

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,482       94.94       94.94
          1 |         79        5.06      100.00
------------+-----------------------------------
      Total |      1,561      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 1999

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,575       96.74       96.74
          1 |         53        3.26      100.00
------------+-----------------------------------
      Total |      1,628      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2000

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,510       97.23       97.23
          1 |         43        2.77      100.00
------------+-----------------------------------
      Total |      1,553      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2001

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,391       95.91       95.91
          1 |        102        4.09      100.00
------------+-----------------------------------
      Total |      2,493      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2002

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,456       97.08       97.08
          1 |         74        2.92      100.00
------------+-----------------------------------
      Total |      2,530      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2003

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,432       95.52       95.52
          1 |        114        4.48      100.00
------------+-----------------------------------
      Total |      2,546      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2004

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,316       97.39       97.39
          1 |         62        2.61      100.00
------------+-----------------------------------
      Total |      2,378      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2005

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,557       96.31       96.31
          1 |         98        3.69      100.00
------------+-----------------------------------
      Total |      2,655      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2006

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,625       96.26       96.26
          1 |        102        3.74      100.00
------------+-----------------------------------
      Total |      2,727      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2007

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,520       97.75       97.75
          1 |         58        2.25      100.00
------------+-----------------------------------
      Total |      2,578      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2008

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,500       97.24       97.24
          1 |         71        2.76      100.00
------------+-----------------------------------
      Total |      2,571      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2009

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,437       97.29       97.29
          1 |         68        2.71      100.00
------------+-----------------------------------
      Total |      2,505      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2010

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,456       96.69       96.69
          1 |         84        3.31      100.00
------------+-----------------------------------
      Total |      2,540      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2011

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,393       97.24       97.24
          1 |         68        2.76      100.00
------------+-----------------------------------
      Total |      2,461      100.00

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> year = 2012

     verifs |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,376       95.54       95.54
          1 |        111        4.46      100.00
------------+-----------------------------------
      Total |      2,487      100.00


. replace hcovpriv = . if himcaid == 2 & (year == 2003)
(27,056 real changes made, 27,056 to missing)

. 
. tab hcovpub , miss

 Any public |
  insurance |
  (summary) |      Freq.     Percent        Cum.
------------+-----------------------------------
Not covered |  3,053,231       68.50       68.50
    Covered |  1,107,003       24.84       93.33
          . |    297,105        6.67      100.00
------------+-----------------------------------
      Total |  4,457,339      100.00

. gen byte any_public = (hcovpub == 2)

. 
. tab hcovpriv , miss

Any private |
  insurance |
  (summary) |      Freq.     Percent        Cum.
------------+-----------------------------------
Not covered |  1,239,261       27.80       27.80
    Covered |  2,893,917       64.92       92.73
          . |    324,161        7.27      100.00
------------+-----------------------------------
      Total |  4,457,339      100.00

. gen byte any_private = (hcovpriv == 2)

. 
. ** We have found evidence that some publicly insured CPS respondents are
. ** mis-reporting their coverage is private. We remove this small group here.
. replace any_private = 0 if any_ind == 1
(279,093 real changes made)

. 
. tab hcovany , miss

        Any |
 insurance, |
  public or |
    private |
  (summary) |      Freq.     Percent        Cum.
------------+-----------------------------------
Not covered |    598,548       13.43       13.43
    Covered |  3,561,686       79.91       93.33
          . |    297,105        6.67      100.00
------------+-----------------------------------
      Total |  4,457,339      100.00

. gen byte any_coverage = (hcovany == 2)

. 
. gen any_empl = (hinsemp == 2)

. 
. ** Drop armed forces(see IPUMS-CPS)
. ** Only working if have positive hours
. drop if empstat == 13
(15,051 observations deleted)

. gen byte working = (empstat == 10)

. 
. gen byte working_alt = (empstat >= 10 & empstat <= 12)

. 
. gen byte unemp = (empstat >= 20 & empstat <= 22)

. 
. gen byte ilf = (empstat >= 10 & empstat <= 22)

. 
. gen any_mcaid  = (himcaid == 2)

. gen any_mcare  = (himcare == 2)

. 
. gen byte any_priv_wk   = (hcovpriv == 2 & working == 1)

. gen byte any_priv_nowk = (hcovpriv == 2 & working == 0)

. 
. gen byte any_empl_wk = (any_empl == 1 & working == 1)

. gen byte any_noempl_wk = (any_empl == 0 & working == 1)

.  
. gen byte any_nocov_wk     = (any_coverage == 0 & working == 1)

. gen byte any_cov_wk     = (any_coverage == 1 & working == 1)

. 
. tab hrswork , miss

      Hours |
worked last |
       week |      Freq.     Percent        Cum.
------------+-----------------------------------
        NIU |  2,536,739       57.10       57.10
     1 hour |      6,443        0.15       57.25
    2 hours |      4,061        0.09       57.34
    3 hours |      4,158        0.09       57.43
    4 hours |      7,112        0.16       57.59
    5 hours |      7,854        0.18       57.77
    6 hours |      8,244        0.19       57.96
    7 hours |      3,719        0.08       58.04
    8 hours |     17,708        0.40       58.44
    9 hours |      3,196        0.07       58.51
   10 hours |     23,578        0.53       59.04
   11 hours |      1,918        0.04       59.09
   12 hours |     16,342        0.37       59.45
   13 hours |      2,700        0.06       59.51
   14 hours |      5,084        0.11       59.63
   15 hours |     27,407        0.62       60.25
   16 hours |     24,410        0.55       60.79
   17 hours |      3,334        0.08       60.87
   18 hours |      8,936        0.20       61.07
   19 hours |      2,443        0.05       61.13
   20 hours |     73,616        1.66       62.78
   21 hours |      4,503        0.10       62.88
   22 hours |      5,973        0.13       63.02
   23 hours |      4,231        0.10       63.11
   24 hours |     34,917        0.79       63.90
   25 hours |     33,237        0.75       64.65
   26 hours |      4,985        0.11       64.76
   27 hours |      5,124        0.12       64.88
   28 hours |     11,986        0.27       65.15
   29 hours |      3,129        0.07       65.22
   30 hours |     62,305        1.40       66.62
   31 hours |      3,045        0.07       66.69
   32 hours |     61,422        1.38       68.07
   33 hours |      5,430        0.12       68.19
   34 hours |      6,752        0.15       68.34
   35 hours |     59,041        1.33       69.67
   36 hours |     26,696        0.60       70.27
   37 hours |     14,326        0.32       70.60
   38 hours |     29,173        0.66       71.25
   39 hours |      7,093        0.16       71.41
   40 hours |    754,492       16.98       88.40
   41 hours |      8,310        0.19       88.58
   42 hours |     22,943        0.52       89.10
   43 hours |     14,023        0.32       89.42
   44 hours |     18,067        0.41       89.82
   45 hours |     74,514        1.68       91.50
   46 hours |     12,326        0.28       91.78
   47 hours |      7,041        0.16       91.94
   48 hours |     37,989        0.86       92.79
   49 hours |      4,463        0.10       92.89
   50 hours |    113,174        2.55       95.44
   51 hours |      2,854        0.06       95.50
   52 hours |     10,111        0.23       95.73
   53 hours |      3,820        0.09       95.82
   54 hours |      5,096        0.11       95.93
   55 hours |     30,107        0.68       96.61
   56 hours |      9,691        0.22       96.83
   57 hours |      2,271        0.05       96.88
   58 hours |      4,081        0.09       96.97
   59 hours |      1,171        0.03       97.00
   60 hours |     63,856        1.44       98.44
   61 hours |      1,033        0.02       98.46
   62 hours |      2,264        0.05       98.51
   63 hours |      1,500        0.03       98.54
   64 hours |      2,296        0.05       98.59
   65 hours |     10,786        0.24       98.84
   66 hours |      1,706        0.04       98.88
   67 hours |        831        0.02       98.89
   68 hours |      1,618        0.04       98.93
   69 hours |        390        0.01       98.94
   70 hours |     16,125        0.36       99.30
   71 hours |        329        0.01       99.31
   72 hours |      4,024        0.09       99.40
   73 hours |        426        0.01       99.41
   74 hours |        490        0.01       99.42
   75 hours |      3,247        0.07       99.49
   76 hours |        632        0.01       99.51
   77 hours |        531        0.01       99.52
   78 hours |        610        0.01       99.53
   79 hours |        168        0.00       99.54
   80 hours |      8,547        0.19       99.73
   81 hours |        138        0.00       99.73
   82 hours |        362        0.01       99.74
   83 hours |        137        0.00       99.74
   84 hours |      2,345        0.05       99.80
   85 hours |        859        0.02       99.82
   86 hours |        202        0.00       99.82
   87 hours |        123        0.00       99.82
   88 hours |        275        0.01       99.83
   89 hours |         75        0.00       99.83
   90 hours |      1,740        0.04       99.87
   91 hours |        155        0.00       99.87
   92 hours |        164        0.00       99.88
   93 hours |         59        0.00       99.88
   94 hours |        119        0.00       99.88
   95 hours |        253        0.01       99.89
   96 hours |        402        0.01       99.90
   97 hours |         51        0.00       99.90
   98 hours |        344        0.01       99.91
   99 hours |      4,162        0.09      100.00
------------+-----------------------------------
      Total |  4,442,288      100.00

. tab hrswork , miss nol

      Hours |
worked last |
       week |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  2,536,739       57.10       57.10
          1 |      6,443        0.15       57.25
          2 |      4,061        0.09       57.34
          3 |      4,158        0.09       57.43
          4 |      7,112        0.16       57.59
          5 |      7,854        0.18       57.77
          6 |      8,244        0.19       57.96
          7 |      3,719        0.08       58.04
          8 |     17,708        0.40       58.44
          9 |      3,196        0.07       58.51
         10 |     23,578        0.53       59.04
         11 |      1,918        0.04       59.09
         12 |     16,342        0.37       59.45
         13 |      2,700        0.06       59.51
         14 |      5,084        0.11       59.63
         15 |     27,407        0.62       60.25
         16 |     24,410        0.55       60.79
         17 |      3,334        0.08       60.87
         18 |      8,936        0.20       61.07
         19 |      2,443        0.05       61.13
         20 |     73,616        1.66       62.78
         21 |      4,503        0.10       62.88
         22 |      5,973        0.13       63.02
         23 |      4,231        0.10       63.11
         24 |     34,917        0.79       63.90
         25 |     33,237        0.75       64.65
         26 |      4,985        0.11       64.76
         27 |      5,124        0.12       64.88
         28 |     11,986        0.27       65.15
         29 |      3,129        0.07       65.22
         30 |     62,305        1.40       66.62
         31 |      3,045        0.07       66.69
         32 |     61,422        1.38       68.07
         33 |      5,430        0.12       68.19
         34 |      6,752        0.15       68.34
         35 |     59,041        1.33       69.67
         36 |     26,696        0.60       70.27
         37 |     14,326        0.32       70.60
         38 |     29,173        0.66       71.25
         39 |      7,093        0.16       71.41
         40 |    754,492       16.98       88.40
         41 |      8,310        0.19       88.58
         42 |     22,943        0.52       89.10
         43 |     14,023        0.32       89.42
         44 |     18,067        0.41       89.82
         45 |     74,514        1.68       91.50
         46 |     12,326        0.28       91.78
         47 |      7,041        0.16       91.94
         48 |     37,989        0.86       92.79
         49 |      4,463        0.10       92.89
         50 |    113,174        2.55       95.44
         51 |      2,854        0.06       95.50
         52 |     10,111        0.23       95.73
         53 |      3,820        0.09       95.82
         54 |      5,096        0.11       95.93
         55 |     30,107        0.68       96.61
         56 |      9,691        0.22       96.83
         57 |      2,271        0.05       96.88
         58 |      4,081        0.09       96.97
         59 |      1,171        0.03       97.00
         60 |     63,856        1.44       98.44
         61 |      1,033        0.02       98.46
         62 |      2,264        0.05       98.51
         63 |      1,500        0.03       98.54
         64 |      2,296        0.05       98.59
         65 |     10,786        0.24       98.84
         66 |      1,706        0.04       98.88
         67 |        831        0.02       98.89
         68 |      1,618        0.04       98.93
         69 |        390        0.01       98.94
         70 |     16,125        0.36       99.30
         71 |        329        0.01       99.31
         72 |      4,024        0.09       99.40
         73 |        426        0.01       99.41
         74 |        490        0.01       99.42
         75 |      3,247        0.07       99.49
         76 |        632        0.01       99.51
         77 |        531        0.01       99.52
         78 |        610        0.01       99.53
         79 |        168        0.00       99.54
         80 |      8,547        0.19       99.73
         81 |        138        0.00       99.73
         82 |        362        0.01       99.74
         83 |        137        0.00       99.74
         84 |      2,345        0.05       99.80
         85 |        859        0.02       99.82
         86 |        202        0.00       99.82
         87 |        123        0.00       99.82
         88 |        275        0.01       99.83
         89 |         75        0.00       99.83
         90 |      1,740        0.04       99.87
         91 |        155        0.00       99.87
         92 |        164        0.00       99.88
         93 |         59        0.00       99.88
         94 |        119        0.00       99.88
         95 |        253        0.01       99.89
         96 |        402        0.01       99.90
         97 |         51        0.00       99.90
         98 |        344        0.01       99.91
         99 |      4,162        0.09      100.00
------------+-----------------------------------
      Total |  4,442,288      100.00

. gen byte hrs_lw_lt20 = (hrswork < 20) & working == 1

. gen byte hrs_lw_2035 = (hrswork >= 20 & hrswork < 35) & working == 1

. gen byte hrs_lw_ge35 = (hrswork >= 35 & hrswork < .) & working == 1

. gen byte hrs_lw_ge20 = (hrswork >= 20 & hrswork < .) & working == 1

. sum hrs_lw*

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
 hrs_lw_lt20 |  4,442,288    .0400024    .1959647          0          1
 hrs_lw_2035 |  4,442,288    .0721819     .258789          0          1
 hrs_lw_ge35 |  4,442,288    .3165569     .465133          0          1
 hrs_lw_ge20 |  4,442,288    .3887389    .4874639          0          1

. 
. replace uhrswork = . if uhrswork == 0
(2,225,441 real changes made, 2,225,441 to missing)

. replace uhrswork = . if empstat < 10 | empstat > 13
(292,242 real changes made, 292,242 to missing)

. 
. replace wkswork1 = . if empstat < 10 | empstat > 13
(2,466,904 real changes made, 2,466,904 to missing)

. 
. gen wage = inctot / (wkswork1 * uhrswork) 
(2,517,683 missing values generated)

. 
. summ year

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
        year |  4,442,288    1999.998    7.834384       1986       2012

. local miny = r(min)

. local maxy = r(max)

. forvalues y = `miny'(1)`maxy' {
  2.         qui summ wage [aw=wtsupp] if year == `y', det
  3.         replace wage = r(p1) if wage < r(p1)  & year == `y'
  4.         replace wage = r(p99) if wage > r(p99) & wage < . & year == `y'
  5. }
(732 real changes made)
(635 real changes made)
(680 real changes made)
(620 real changes made)
(667 real changes made)
(630 real changes made)
(673 real changes made)
(586 real changes made)
(719 real changes made)
(658 real changes made)
(700 real changes made)
(633 real changes made)
(719 real changes made)
(617 real changes made)
(642 real changes made)
(620 real changes made)
(647 real changes made)
(624 real changes made)
(652 real changes made)
(606 real changes made)
(578 real changes made)
(530 real changes made)
(596 real changes made)
(528 real changes made)
(605 real changes made)
(551 real changes made)
(589 real changes made)
(562 real changes made)
(599 real changes made)
(559 real changes made)
(995 real changes made)
(827 real changes made)
(946 real changes made)
(837 real changes made)
(980 real changes made)
(834 real changes made)
(894 real changes made)
(867 real changes made)
(863 real changes made)
(796 real changes made)
(872 real changes made)
(800 real changes made)
(852 real changes made)
(812 real changes made)
(906 real changes made)
(810 real changes made)
(849 real changes made)
(787 real changes made)
(848 real changes made)
(768 real changes made)
(775 real changes made)
(727 real changes made)
(778 real changes made)
(748 real changes made)

. 
. replace wage = log(wage)
(1,924,605 real changes made)

. 
. gen age2 = age * age

. gen age3 = age2 * age

. gen age4 = age3 * age

. gen age5 = age4 * age

. 
. gen female = (sex == 2)

. 
. gen hsd = (educ < 73)

. gen hsg = (educ == 73)

. gen smc1 = (educ > 73 & educ < 91)

. gen smc2 = (educ >=91 & educ < 111)

. gen col = (educ == 111)

. 
. gen femaleXkid = female * kid

. 
. foreach var of varlist female hsg smc1 smc2 col kid {
  2.  gen `var'Xage = `var' * age
  3.  gen `var'Xage2 = `var' * age2
  4.  gen `var'Xage3 = `var' * age3
  5.  gen `var'Xage4 = `var' * age4
  6.  gen `var'Xage5 = `var' * age5
  7. }

. 
. foreach var of varlist hsg smc1 smc2 col kid {
  2.  gen `var'XageXfemale = `var' * age * female
  3.  gen `var'Xage2Xfemale = `var' * age2 * female
  4.  gen `var'Xage3Xfemale = `var' * age3 * female
  5.  gen `var'Xage4Xfemale = `var' * age4 * female
  6.  gen `var'Xage5Xfemale = `var' * age5 * female
  7. }

. 
. reg wage age age2-age5 *Xage* female hsg smc1 smc2 col i.year if year >= 2000 & year <= 2004

      Source |       SS           df       MS      Number of obs   =   415,467
-------------+----------------------------------   F(69, 415397)   =   1652.49
       Model |  49797.0846        69  721.696878   Prob > F        =    0.0000
    Residual |  181418.035   415,397  .436734101   R-squared       =    0.2154
-------------+----------------------------------   Adj R-squared   =    0.2152
       Total |   231215.12   415,466  .556519956   Root MSE        =    .66086

----------------------------------------------------------------------------------
            wage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-----------------+----------------------------------------------------------------
             age |  -.0475649   .0374688    -1.27   0.204    -.1210025    .0258728
            age2 |   .0059376   .0019007     3.12   0.002     .0022123     .009663
            age3 |  -.0001976   .0000455    -4.34   0.000    -.0002867   -.0001085
            age4 |   2.71e-06   5.16e-07     5.25   0.000     1.70e-06    3.72e-06
            age5 |  -1.30e-08   2.23e-09    -5.84   0.000    -1.74e-08   -8.64e-09
      femaleXage |  -.1708716   .0438014    -3.90   0.000    -.2567211   -.0850221
     femaleXage2 |   .0094054   .0022515     4.18   0.000     .0049925    .0138184
     femaleXage3 |  -.0002378   .0000549    -4.33   0.000    -.0003455   -.0001301
     femaleXage4 |   2.71e-06   6.37e-07     4.25   0.000     1.46e-06    3.96e-06
     femaleXage5 |  -1.12e-08   2.82e-09    -3.99   0.000    -1.68e-08   -5.72e-09
         hsgXage |    .162314   .0465142     3.49   0.000     .0711475    .2534805
        hsgXage2 |  -.0071163   .0023209    -3.07   0.002    -.0116652   -.0025674
        hsgXage3 |   .0001609    .000055     2.93   0.003     .0000532    .0002686
        hsgXage4 |  -1.81e-06   6.20e-07    -2.92   0.003    -3.02e-06   -5.95e-07
        hsgXage5 |   7.87e-09   2.67e-09     2.95   0.003     2.64e-09    1.31e-08
        smc1Xage |  -.0579707   .0544451    -1.06   0.287    -.1646814      .04874
       smc1Xage2 |   .0034993   .0027082     1.29   0.196    -.0018086    .0088072
       smc1Xage3 |  -.0000749   .0000641    -1.17   0.243    -.0002005    .0000507
       smc1Xage4 |   6.53e-07   7.24e-07     0.90   0.367    -7.65e-07    2.07e-06
       smc1Xage5 |  -1.94e-09   3.13e-09    -0.62   0.535    -8.07e-09    4.19e-09
        smc2Xage |   .3975512   .0969765     4.10   0.000     .2074802    .5876221
       smc2Xage2 |  -.0177487   .0046006    -3.86   0.000    -.0267657   -.0087317
       smc2Xage3 |   .0003935   .0001053     3.74   0.000     .0001872    .0005998
       smc2Xage4 |  -4.26e-06   1.16e-06    -3.67   0.000    -6.53e-06   -1.98e-06
       smc2Xage5 |   1.77e-08   4.94e-09     3.58   0.000     8.03e-09    2.74e-08
         colXage |  -.0299896   .0799079    -0.38   0.707    -.1866067    .1266275
        colXage2 |   .0038748   .0036772     1.05   0.292    -.0033324     .011082
        colXage3 |    -.00011   .0000819    -1.34   0.179    -.0002705    .0000505
        colXage4 |   1.23e-06   8.82e-07     1.39   0.164    -5.01e-07    2.96e-06
        colXage5 |  -4.89e-09   3.67e-09    -1.33   0.183    -1.21e-08    2.31e-09
         kidXage |  -.0192448   .0055568    -3.46   0.001    -.0301359   -.0083537
        kidXage2 |   .0015095   .0005233     2.88   0.004     .0004839    .0025351
        kidXage3 |   -.000031   .0000176    -1.76   0.078    -.0000655    3.44e-06
        kidXage4 |   1.83e-07   2.51e-07     0.73   0.465    -3.08e-07    6.75e-07
        kidXage5 |  -2.67e-11   1.29e-09    -0.02   0.983    -2.55e-09    2.50e-09
  hsgXageXfemale |    .003967   .0096218     0.41   0.680    -.0148915    .0228255
 hsgXage2Xfemale |  -.0002904   .0009127    -0.32   0.750    -.0020794    .0014985
 hsgXage3Xfemale |   3.94e-06   .0000305     0.13   0.897    -.0000559    .0000637
 hsgXage4Xfemale |   2.05e-08   4.29e-07     0.05   0.962    -8.20e-07    8.61e-07
 hsgXage5Xfemale |  -4.09e-10   2.15e-09    -0.19   0.849    -4.63e-09    3.81e-09
 smc1XageXfemale |    .041662    .010513     3.96   0.000     .0210568    .0622671
smc1Xage2Xfemale |  -.0033694   .0010069    -3.35   0.001    -.0053429   -.0013958
smc1Xage3Xfemale |   .0000917   .0000339     2.70   0.007     .0000252    .0001583
smc1Xage4Xfemale |  -1.02e-06   4.81e-07    -2.11   0.035    -1.96e-06   -7.39e-08
smc1Xage5Xfemale |   3.91e-09   2.44e-09     1.60   0.109    -8.72e-10    8.69e-09
 smc2XageXfemale |  -.0126849   .0180278    -0.70   0.482    -.0480189     .022649
smc2Xage2Xfemale |    .001039   .0016232     0.64   0.522    -.0021424    .0042205
smc2Xage3Xfemale |  -.0000321   .0000524    -0.61   0.541    -.0001347    .0000706
smc2Xage4Xfemale |   4.34e-07   7.20e-07     0.60   0.546    -9.77e-07    1.85e-06
smc2Xage5Xfemale |  -2.10e-09   3.57e-09    -0.59   0.556    -9.10e-09    4.89e-09
  colXageXfemale |   .0227013   .0151683     1.50   0.134    -.0070281    .0524307
 colXage2Xfemale |  -.0017503   .0013464    -1.30   0.194    -.0043893    .0008886
 colXage3Xfemale |   .0000461   .0000429     1.08   0.282    -.0000379    .0001301
 colXage4Xfemale |  -4.96e-07   5.82e-07    -0.85   0.394    -1.64e-06    6.44e-07
 colXage5Xfemale |   1.81e-09   2.85e-09     0.64   0.524    -3.77e-09    7.39e-09
  kidXageXfemale |   .0352773   .0080798     4.37   0.000     .0194411    .0511135
 kidXage2Xfemale |  -.0032542    .000762    -4.27   0.000    -.0047477   -.0017608
 kidXage3Xfemale |   .0000926   .0000256     3.62   0.000     .0000424    .0001427
 kidXage4Xfemale |  -1.06e-06   3.65e-07    -2.90   0.004    -1.77e-06   -3.42e-07
 kidXage5Xfemale |   4.23e-09   1.87e-09     2.27   0.023     5.75e-10    7.89e-09
          female |   1.067528   .3232329     3.30   0.001      .434001    1.701054
             hsg |  -1.254697   .3527967    -3.56   0.000    -1.946168   -.5632259
            smc1 |    .535749   .4154421     1.29   0.197     -.278505    1.350003
            smc2 |  -3.066364   .7897171    -3.88   0.000    -4.614186   -1.518543
             col |   .2381689   .6738993     0.35   0.724    -1.082653    1.558991
                 |
            year |
           2001  |   .0510574   .0035087    14.55   0.000     .0441806    .0579343
           2002  |   .0804304   .0035297    22.79   0.000     .0735123    .0873485
           2003  |   .0934061   .0035398    26.39   0.000     .0864682    .1003441
           2004  |   .1192505   .0035516    33.58   0.000     .1122894    .1262116
                 |
           _cons |   1.676561   .2774841     6.04   0.000     1.132701    2.220422
----------------------------------------------------------------------------------

. predict wage_resid, resid
(2,517,683 missing values generated)

. 
. drop age2-age5 *Xage*

. 
. gen wage_empl = wage if any_empl == 1
(3,499,776 missing values generated)

. 
. ************************************************************
. **   Generate "type" variables
. ************************************************************
. 
. gen type0 = 1

. gen type1 = (sex == 2)

. gen type2 = ///
>  0 * (age >= 21 & age < 40) + ///
>  1 * (age >= 40 & age < 65)

. gen type3 = (educ >= 73)

. 
. ** Health: 1 is Excellent, 5 is Poor
. tab health , miss

     Health |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
  Excellent |  1,032,115       23.23       23.23
  Very good |    931,577       20.97       44.20
       Good |    699,430       15.74       59.95
       Fair |    225,753        5.08       65.03
       Poor |     95,888        2.16       67.19
          . |  1,457,525       32.81      100.00
------------+-----------------------------------
      Total |  4,442,288      100.00

. gen type4 = (health >= 3) 

. gen type5 = (health >= 2) 

. gen type6 = (health >= 2) 

. sum type4 type5 type6

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       type4 |  4,442,288    .5579548    .4966299          0          1
       type5 |  4,442,288    .7676614    .4223238          0          1
       type6 |  4,442,288    .7676614    .4223238          0          1

. 
. gen type9 = has_spouse 

. 
. if (`1' == 7) {
.  keep if has_spouse == 1
. }

. gen type7 = (sex == 2)

. 
. if (`1' == 8) {
.  keep if has_spouse == 0
. }

. gen type8 = (sex == 2)

. 
. **
. ** DD type (use same "prepare-data" to keep same sample restrictions)
. **
. gen type10 = 1

. gen type11 = 1

. if (`1' == 10 | `1' == 11) {
.         replace kid = 0
. }

. 
. ************************************************************
. **   Describe health status
. ************************************************************
. 
. ** To answer one referee request, we need to tabulate health status.
. ** Recall, that 1 indicates "excellent."
. tab health

     Health |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
  Excellent |  1,032,115       34.58       34.58
  Very good |    931,577       31.21       65.79
       Good |    699,430       23.43       89.22
       Fair |    225,753        7.56       96.79
       Poor |     95,888        3.21      100.00
------------+-----------------------------------
      Total |  2,984,763      100.00

. 
. tab health if any_public == 1

     Health |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
  Excellent |    175,345       22.04       22.04
  Very good |    194,424       24.43       46.47
       Good |    230,097       28.92       75.38
       Fair |    126,563       15.90       91.29
       Poor |     69,327        8.71      100.00
------------+-----------------------------------
      Total |    795,756      100.00

. 
. tab health if statefip == 47

     Health |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
  Excellent |     12,131       31.82       31.82
  Very good |     10,621       27.86       59.69
       Good |      9,666       25.36       85.04
       Fair |      3,639        9.55       94.59
       Poor |      2,062        5.41      100.00
------------+-----------------------------------
      Total |     38,119      100.00

. 
. tab health if any_public == 1 & statefip == 47

     Health |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
  Excellent |      2,616       21.03       21.03
  Very good |      2,585       20.78       41.81
       Good |      3,463       27.84       69.65
       Fair |      2,195       17.65       87.30
       Poor |      1,580       12.70      100.00
------------+-----------------------------------
      Total |     12,439      100.00

. 
. tab health if year == 2005

     Health |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
  Excellent |     69,126       34.94       34.94
  Very good |     61,864       31.27       66.22
       Good |     46,163       23.34       89.55
       Fair |     14,585        7.37       96.93
       Poor |      6,082        3.07      100.00
------------+-----------------------------------
      Total |    197,820      100.00

. 
. tab health if year == 2005 & any_public == 1

     Health |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
  Excellent |     11,806       22.54       22.54
  Very good |     13,000       24.82       47.36
       Good |     15,061       28.75       76.11
       Fair |      8,078       15.42       91.54
       Poor |      4,433        8.46      100.00
------------+-----------------------------------
      Total |     52,378      100.00

. 
. tab health if year == 2005 & statefip == 47

     Health |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
  Excellent |        881       33.32       33.32
  Very good |        718       27.16       60.48
       Good |        671       25.38       85.85
       Fair |        236        8.93       94.78
       Poor |        138        5.22      100.00
------------+-----------------------------------
      Total |      2,644      100.00

. 
. ************************************************************
. **   Collapse to (DD) cells
. ************************************************************
. 
. if (`1' < 13) {
. 
.         preserve
. 
.                 foreach var of varlist any_public working* any_private hrs_lw_* {
  2.                  gen se_`var' = `var'
  3.                 }
. 
.                 tempfile rest
.                 save `rest'
. 
.                 ** Extract the working variable separately
.                 ** since it requires a separate weight
.                         collapse ///
>                           (sum) wtsupp (semean) se_working* se_hrs_lw* ///
>                           (mean) working* unemp ilf hrs_lw_* hrswork wage* ///
>                         [aw = wtsupp] , by(year statefip) fast
. 
.                         tempfile workingDD
.                         save `workingDD'
. 
. 
.                 use `rest'
.                 ** Note: the weight hinswt is designed solely for the insurance variables
.                 collapse (sum) hinswt (mean) any_* ///
>                       (semean) se_any_* ///
>                       [aw = hinswt], by(year statefip) fast
. 
.                 ** Redo year for health variables (NOT labor supply variables)
.                 replace year = year - 1
. 
.                 sort year statefip
.                 merge 1:1 year statefip using `workingDD'
.                 tab _merge
.                 drop _merge
. 
.         save ../dta/cps_DD_FINAL.dta, replace
. 
.         restore
. }

. 
. ************************************************************
. **   Collapse to (DDD) cells
. ************************************************************
. 
. if (`1' < 13) {
. 
.         foreach var of varlist any_public working* any_private hrs_lw_* {
  2.                 gen se_`var' = `var'
  3.         }
. 
.         ** Extract the working variable separately
.         ** since it requires a separate weight
.         preserve
.                 collapse ///
>                   (sum) wtsupp (semean) se_working* se_hrs_lw* ///
>                   (mean) working* unemp ilf hrs_lw_* hrswork wage* ///
>                 [aw = wtsupp] , by(year statefip kid type`1') fast
. 
.                 tempfile working
.                 save `working'
. 
.         restore
. 
. 
.         ** Note: the weight hinswt is designed solely for the insurance variables
.         collapse (sum) hinswt (mean) any_* ///
>               (semean) se_any_* ///
>               [aw = hinswt], by(year statefip kid type`1') fast
. 
.         ** Redo year for health variables (NOT labor supply variables)
.         replace year = year - 1
. 
.         sort year statefip kid type`1'
.         merge 1:1 year statefip kid type`1' using `working'
.         tab _merge
.         drop _merge
. 
.         save ../dta/cps_DDD_FINAL.dta, replace
. 
. }

. 
. 
. if (`1' == 13) {
.   save ../dta/cps_MICRO_FINAL.dta, replace
file ../dta/cps_MICRO_FINAL.dta saved
. }

. 
end of do-file

. *exit
. use ../dta/cps_MICRO_FINAL.dta, clear

. keep if year >= 1998
(1,706,310 observations deleted)

. keep if age >= 21
(980,013 observations deleted)

. 
. 
. ************************************************************
. **   Prpare for simple difference-in-difference regressions
. ************************************************************
. 
. gen south = ///
>  (statefip == 54 | ///
>   statefip == 21 | statefip == 47 | ///
>   statefip == 37 | statefip == 51 | statefip == 45 | statefip == 13 | ///
>   statefip ==  5 | statefip == 22 | statefip == 48 | statefip == 40 | ///
>   statefip ==  1 | statefip == 28 | statefip == 12 )

. 
. tab year, missing

Survey year |      Freq.     Percent        Cum.
------------+-----------------------------------
       1998 |     82,964        4.72        4.72
       1999 |     83,430        4.75        9.48
       2000 |     84,364        4.80       14.28
       2001 |    129,422        7.37       21.65
       2002 |    128,709        7.33       28.98
       2003 |    128,481        7.32       36.30
       2004 |    126,658        7.21       43.51
       2005 |    125,368        7.14       50.65
       2006 |    124,370        7.08       57.73
       2007 |    123,414        7.03       64.76
       2008 |    123,416        7.03       71.79
       2009 |    124,129        7.07       78.86
       2010 |    125,955        7.17       86.03
       2011 |    123,582        7.04       93.07
       2012 |    121,703        6.93      100.00
------------+-----------------------------------
      Total |  1,755,965      100.00

. tab statefip

                      State (FIPS code) |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                                Alabama |     22,570        1.29        1.29
                                 Alaska |     22,178        1.26        2.55
                                Arizona |     25,198        1.43        3.98
                               Arkansas |     19,948        1.14        5.12
                             California |    156,840        8.93       14.05
                               Colorado |     34,159        1.95       16.00
                            Connecticut |     31,148        1.77       17.77
                               Delaware |     24,240        1.38       19.15
                   District of Columbia |     19,304        1.10       20.25
                                Florida |     79,335        4.52       24.77
                                Georgia |     32,236        1.84       26.60
                                 Hawaii |     28,764        1.64       28.24
                                  Idaho |     21,386        1.22       29.46
                               Illinois |     59,274        3.38       32.84
                                Indiana |     27,657        1.58       34.41
                                   Iowa |     29,091        1.66       36.07
                                 Kansas |     24,985        1.42       37.49
                               Kentucky |     24,040        1.37       38.86
                              Louisiana |     18,723        1.07       39.93
                                  Maine |     28,017        1.60       41.52
                               Maryland |     32,344        1.84       43.36
                          Massachusetts |     28,651        1.63       44.99
                               Michigan |     45,982        2.62       47.61
                              Minnesota |     34,530        1.97       49.58
                            Mississippi |     17,996        1.02       50.60
                               Missouri |     26,348        1.50       52.10
                                Montana |     18,021        1.03       53.13
                               Nebraska |     25,753        1.47       54.60
                                 Nevada |     30,265        1.72       56.32
                          New Hampshire |     29,261        1.67       57.99
                             New Jersey |     42,246        2.41       60.39
                             New Mexico |     21,503        1.22       61.62
                               New York |     85,217        4.85       66.47
                         North Carolina |     37,048        2.11       68.58
                           North Dakota |     21,591        1.23       69.81
                                   Ohio |     51,106        2.91       72.72
                               Oklahoma |     22,623        1.29       74.01
                                 Oregon |     24,717        1.41       75.42
                           Pennsylvania |     57,489        3.27       78.69
                           Rhode Island |     26,742        1.52       80.21
                         South Carolina |     22,779        1.30       81.51
                           South Dakota |     25,462        1.45       82.96
                              Tennessee |     22,903        1.30       84.27
                                  Texas |     94,634        5.39       89.65
                                   Utah |     22,402        1.28       90.93
                                Vermont |     22,203        1.26       92.19
                               Virginia |     32,315        1.84       94.04
                             Washington |     28,719        1.64       95.67
                          West Virginia |     22,118        1.26       96.93
                              Wisconsin |     31,532        1.80       98.73
                                Wyoming |     22,372        1.27      100.00
----------------------------------------+-----------------------------------
                                  Total |  1,755,965      100.00

. 
. gen byte tn = (statefip == 47)

. gen byte post = year >= 2006

. gen byte tn_X_post = tn * post

. 
. ************************************************************
. **   Prepare for simple difference-in-difference regressions
. ************************************************************
. 
. gen byte nokid = (1 - kid)

. gen byte nokid_X_post = (1 - kid) * post

. gen byte tn_X_nokid = tn * (1 - kid)

. gen tn_X_post_X_nokid = tn * (1 - kid) * post

. 
. ************************************************************
. **   Generate "type" variables
. ************************************************************
. 
. tab female

     female |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    816,924       46.52       46.52
          1 |    939,041       53.48      100.00
------------+-----------------------------------
      Total |  1,755,965      100.00

. 
. gen byte agebin = 0 * (age >= 21 & age < 40) + ///
>  1 * (age >= 40 & age < 65)

. tab agebin

     agebin |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    954,753       54.37       54.37
          1 |    801,212       45.63      100.00
------------+-----------------------------------
      Total |  1,755,965      100.00

. 
. gen byte educbin = (educ >= 73)

. 
. gen byte ourhealthbin = (health >= 2)

. gen byte tradhealthbin = (health > 2)

. 
. gen byte age5564 = 0 * (age >= 21 & age < 54) + 1 * (age >= 55 & age <= 64)

. tab age5564

    age5564 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  1,524,104       86.80       86.80
          1 |    231,861       13.20      100.00
------------+-----------------------------------
      Total |  1,755,965      100.00

. 
. d, f

Contains data from ../dta/cps_MICRO_FINAL.dta
 Observations:     1,755,965                  
    Variables:           151                  23 Feb 2024 12:56
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
year            int     %8.0g                 Survey year
serial          long    %12.0g                Household serial number
hwtsupp         float   %10.4f     hwtsupp_lbl
                                              Household weight, Supplement
region          byte    %27.0g     region_lbl
                                              Region and division
statefip        byte    %57.0g     statefip_lbl
                                              State (FIPS code)
metro           byte    %27.0g     metro_lbl
                                              Metropolitan central city status
metarea         int     %50.0g     metarea_lbl
                                              Metropolitan area
month           byte    %9.0g      month_lbl
                                              Month
wtsupp          float   %10.4f                Supplement Weight
hinswt          double  %9.0f                 Summary health insurance weight
sploc           byte    %8.0g                 Spouse's location in household
sprule          byte    %74.0g     sprule_lbl
                                              Rule for linking spouse
nchild          byte    %18.0g     nchild_lbl
                                              Number of own children in household
eldch           byte    %20.0g     eldch_lbl
                                              Age of eldest own child in household
relate          int     %34.0g     relate_lbl
                                              Relationship to household head
age             byte    %19.0g     age_lbl    Age
sex             byte    %8.0g      sex_lbl    Sex
race            int     %37.0g     race_lbl   Race
marst           byte    %23.0g     marst_lbl
                                              Marital status
citizen         byte    %31.0g     citizen_lbl
                                              Citizenship status
educ            int     %51.0g     educ_lbl   Educational attainment recode
higrade         int     %31.0g     higrade_lbl
                                              Highest grade of school
educ99          byte    %47.0g     educ99_lbl
                                              Educational attainment, 1990
empstat         byte    %30.0g     empstat_lbl
                                              Employment status
labforce        byte    %26.0g     labforce_lbl
                                              Labor force status
occ             int     %8.0g      occ_lbl    Occupation
occ1990         int     %78.0g     occ1990_lbl
                                              Occupation, 1990 basis
occ1950         int     %60.0g     occ1950_lbl
                                              Occupation, 1950 basis
ind             int     %8.0g      ind_lbl    Industry
ind1950         int     %57.0g     ind1950_lbl
                                              Industry, 1950 basis
wkswork1        byte    %8.0g      wkswork1_lbl
                                              Weeks worked last year
wkswork2        byte    %12.0g     wkswork2_lbl
                                              Weeks worked last year, intervalled
hrswork         byte    %8.0g      hrswork_lbl
                                              Hours worked last week
uhrswork        byte    %13.0g     uhrswork_lbl
                                              Usual hours worked per week (last yr)
hourwage        int     %8.0g                 Hourly wage
paidhour        byte    %8.0g      paidhour_lbl
                                              Paid by the hour
union           byte    %33.0g     union_lbl
                                              Union membership
firmsize        byte    %10.0g     firmsize_lbl
                                              Number of employees
ftotval         double  %10.0f     ftotval_lbl
                                              Total family income
inctot          double  %8.0f      inctot_lbl
                                              Total personal income
incwage         long    %12.0g     incwage_lbl
                                              Wage and salary income
earnweek        int     %8.0g                 Weekly earnings
poverty         byte    %42.0g     poverty_lbl
                                              Official poverty status
cutoff          long    %12.0g                Cutoff for offical poverty status, in dollars
disabwrk        byte    %34.0g     disabwrk_lbl
                                              Work disability
health          byte    %9.0g      health_lbl
                                              Health status
migsta1         byte    %20.0g     migsta1_lbl
                                              State of residence 1 year ago
migrate1        byte    %36.0g     migrate1_lbl
                                              Migration status, 1 year
hcovany         byte    %11.0g     hcovany_lbl
                                              Any insurance, public or private (summary)
hcovpriv        byte    %11.0g     hcovpriv_lbl
                                              Any private insurance (summary)
hinsemp         byte    %11.0g     hinsemp_lbl
                                              Employer-sponsored insurance (summary)
hinspur         byte    %11.0g     hinspur_lbl
                                              Individually purchased insurance (summary)
hcovpub         byte    %11.0g     hcovpub_lbl
                                              Any public insurance (summary)
hinscaid        byte    %11.0g     hinscaid_lbl
                                              Any Medicaid/SCHIP/other public insurance (summary)
hinscare        byte    %11.0g     hinscare_lbl
                                              Medicare coverage (summary)
hinsmil         byte    %11.0g     hinsmil_lbl
                                              Any military insurance (summary)
inclugh         byte    %8.0g      inclugh_lbl
                                              Included in employer group health plan last year
paidgh          byte    %18.0g     paidgh_lbl
                                              Employer paid for group health plan
emcontrb        int     %8.0g      emcontrb_lbl
                                              Employer contribution for health insurance
himcaid         byte    %8.0g      himcaid_lbl
                                              Covered by Medicaid last year
himcare         byte    %8.0g      himcare_lbl
                                              Covered by Medicare last year
hichamp         byte    %8.0g      hichamp_lbl
                                              Covered by military health insurance last year
phinsur         byte    %8.0g      phinsur_lbl
                                              Reported covered by private health insurance last year
phiown          byte    %8.0g      phiown_lbl
                                              Private health insurance in own name last year
caid            byte    %8.0g      caid_lbl   Covered by Medicaid last year
care            byte    %8.0g      care_lbl   Covered by Medicare last year
champus         byte    %8.0g      champus_lbl
                                              Covered by Champus/Tricare last year
champva         byte    %8.0g      champva_lbl
                                              Covered by CHAMPVA last year
militva         byte    %37.0g     militva_lbl
                                              Covered by VA or Military health care last year
indianh         byte    %8.0g      indianh_lbl
                                              Covered by Indian Health Service last year
groupown        byte    %8.0g      groupown_lbl
                                              Policyholder for employment-based insurance last year
groupdep        byte    %8.0g      groupdep_lbl
                                              Dependent covered by employment-based insurance last year
privown         byte    %8.0g      privown_lbl
                                              Policyholder for privately-purchased insurance last year
privdep         byte    %8.0g      privdep_lbl
                                              Dependent covered by privately-purchased insurance last year
grouptyp        byte    %17.0g     grouptyp_lbl
                                              Type of employment-based coverage last year
privtyp         byte    %17.0g     privtyp_lbl
                                              Type of privately-purchased coverage last year
grpwho1         byte    %44.0g     grpwho1_lbl
                                              Line number of first policyholder of employment-based insurance
grpwho2         byte    %44.0g     grpwho2_lbl
                                              Line number of second policyholder of employment-based insurance
privwho1        byte    %46.0g     privwho1_lbl
                                              Line number of first policyholder of privately-purchased insurance
privwho2        byte    %46.0g     privwho2_lbl
                                              Line number of second policyholder of privately-purchased insurance
mocaid          byte    %8.0g      mocaid_lbl
                                              Months of Medicaid coverage last year
schip           byte    %8.0g      schip_lbl
                                              State Children's Health Insurance Program coverage last year
verify          byte    %13.0g     verify_lbl
                                              Verification: Did individual actually have health insurance
groupout        byte    %8.0g      groupout_lbl
                                              Employment-based insurance covered non-household member
privout         byte    %8.0g      privout_lbl
                                              Privately-purchased insurance covered non-household member
out             byte    %8.0g      out_lbl    Covered by policy of person outside the household
covergh         byte    %8.0g      covergh_lbl
                                              Covered by group health insurance, last year
coverpi         byte    %8.0g      coverpi_lbl
                                              Covered by private health insurance, last year
yngch           byte    %8.0g                 Age of youngest own child in household
own_kid         float   %9.0g                 
min_age         float   %9.0g                 
max_age         float   %9.0g                 
kid             float   %9.0g                 
any_ind         float   %9.0g                 
has_spouse      float   %9.0g                 
verifs          float   %9.0g                 
any_public      byte    %8.0g                 
any_private     byte    %8.0g                 
any_coverage    byte    %8.0g                 
any_empl        float   %9.0g                 
working         byte    %8.0g                 
working_alt     byte    %8.0g                 
unemp           byte    %8.0g                 
ilf             byte    %8.0g                 
any_mcaid       float   %9.0g                 
any_mcare       float   %9.0g                 
any_priv_wk     byte    %8.0g                 
any_priv_nowk   byte    %8.0g                 
any_empl_wk     byte    %8.0g                 
any_noempl_wk   byte    %8.0g                 
any_nocov_wk    byte    %8.0g                 
any_cov_wk      byte    %8.0g                 
hrs_lw_lt20     byte    %8.0g                 
hrs_lw_2035     byte    %8.0g                 
hrs_lw_ge35     byte    %8.0g                 
hrs_lw_ge20     byte    %8.0g                 
wage            float   %9.0g                 
female          float   %9.0g                 
hsd             float   %9.0g                 
hsg             float   %9.0g                 
smc1            float   %9.0g                 
smc2            float   %9.0g                 
col             float   %9.0g                 
femaleXkid      float   %9.0g                 
wage_resid      float   %9.0g                 Residuals
wage_empl       float   %9.0g                 
type0           float   %9.0g                 
type1           float   %9.0g                 
type2           float   %9.0g                 
type3           float   %9.0g                 
type4           float   %9.0g                 
type5           float   %9.0g                 
type6           float   %9.0g                 
type9           float   %9.0g                 
type7           float   %9.0g                 
type8           float   %9.0g                 
type10          float   %9.0g                 
type11          float   %9.0g                 
south           float   %9.0g                 
tn              byte    %8.0g                 
post            byte    %8.0g                 
tn_X_post       byte    %8.0g                 
nokid           byte    %8.0g                 
nokid_X_post    byte    %8.0g                 
tn_X_nokid      byte    %8.0g                 
tn_X_post_X_nokid
                float   %9.0g                 
agebin          byte    %8.0g                 
educbin         byte    %8.0g                 
ourhealthbin    byte    %8.0g                 
tradhealthbin   byte    %8.0g                 
age5564         byte    %8.0g                 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Sorted by: year  serial  age
     Note: Dataset has changed since last saved.

. 
. keep ///
> female agebin age5564 educbin ourhealthbin tradhealthbin age ///
> south statefip year tn post nokid ///
> any_public any_empl_wk working any_private wage* hrs_lw* unemp ilf  ///
> any_empl any_noempl_wk any_nocov_wk any_ind ///
> hrswork ///
> wtsupp hinswt ///
> race smc1 smc2 col hsd hsg 

. 
. compress
  variable any_ind was float now byte
  variable any_empl was float now byte
  variable female was float now byte
  variable hsd was float now byte
  variable hsg was float now byte
  variable smc1 was float now byte
  variable smc2 was float now byte
  variable col was float now byte
  variable south was float now byte
  (47,411,055 bytes saved)

. 
. ************************************************************
. **   Table I
. ************************************************************
. 
. preserve

. 
.         keep if south == 1
(1,286,697 observations deleted)

.         keep if age >= 21 & age < 65
(77,927 observations deleted)

. 
.         ** We divide people into White, Black, and Other
.         tab race , miss

                                 Race |      Freq.     Percent        Cum.
--------------------------------------+-----------------------------------
                                White |    300,261       76.73       76.73
                          Black/Negro |     73,591       18.80       95.53
         American Indian/Aleut/Eskimo |      3,843        0.98       96.51
            Asian or Pacific Islander |      2,095        0.54       97.05
                           Asian only |      6,667        1.70       98.75
       Hawaiian/Pacific Islander only |        326        0.08       98.84
                          White-Black |        546        0.14       98.97
                White-American Indian |      3,144        0.80       99.78
                          White-Asian |        301        0.08       99.86
      White-Hawaiian/Pacific Islander |         40        0.01       99.87
                Black-American Indian |        312        0.08       99.95
                          Black-Asian |         42        0.01       99.96
      Black-Hawaiian/Pacific Islander |          8        0.00       99.96
                American Indian-Asian |          4        0.00       99.96
      Asian-Hawaiian/Pacific Islander |         17        0.00       99.96
          White-Black-American Indian |        110        0.03       99.99
                    White-Black-Asian |          4        0.00       99.99
          White-American Indian-Asian |          6        0.00       99.99
White-Asian-Hawaiian/Pacific Islander |          5        0.00      100.00
    White-Black-American Indian-Asian |          1        0.00      100.00
      Two or three races, unspecified |         17        0.00      100.00
      Four or five races, unspecified |          1        0.00      100.00
--------------------------------------+-----------------------------------
                                Total |    391,341      100.00

.         ** 100  White   
. 
.         ** 200  Black/Negro     
.         ** 801  White-Black     
.         ** 805  Black-American Indian   
.         ** 806  Black-Asian     
.         ** 807  Black-Hawaiian/Pacific Islander 
. 
.         ** 300  American Indian/Aleut/Eskimo    
.         ** 650  Asian or Pacific Islander       
.         ** 651  Asian only      
.         ** 652  Hawaiian/Pacific Islander only  
.         ** 700  Other (single) race, n.e.c.     
.         ** 802  White-American Indian   
.         ** 803  White-Asian     
.         ** 804  White-Hawaiian/Pacific Islander 
.         ** 808  American Indian-Asian   
.         ** 809  Asian-Hawaiian/Pacific Islander 
.         ** 810  White-Black-American Indian     
.         ** 811  White-Black-Asian       
.         ** 812  White-American Indian-Asian     
.         ** 813  White-Asian-Hawaiian/Pacific Islander   
.         ** 814  White-Black-American Indian-Asian       
.         ** 820  Two or three races, unspecified 
.         ** 830  Four or five races, unspecified 
.         ** 999  NIU
.         gen byte white = (race == 100)

.         gen byte black = (race == 200 | race == 801 | race == 805 | race == 806 | race == 807)

.         gen byte other = 1 - white - black

.         tab1 white black other

-> tabulation of white  

      white |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     91,080       23.27       23.27
          1 |    300,261       76.73      100.00
------------+-----------------------------------
      Total |    391,341      100.00

-> tabulation of black  

      black |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    316,842       80.96       80.96
          1 |     74,499       19.04      100.00
------------+-----------------------------------
      Total |    391,341      100.00

-> tabulation of other  

      other |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    374,760       95.76       95.76
          1 |     16,581        4.24      100.00
------------+-----------------------------------
      Total |    391,341      100.00

. 
.         gen byte any_college = ( smc1 == 1 | smc2 == 1 | col == 1)

.         gen sum = hsd + hsg + any_college

.         tab sum

        sum |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |    391,341      100.00      100.00
------------+-----------------------------------
      Total |    391,341      100.00

. 
.         gen byte kid = 1 - nokid

. 
.         matrix sample_stats = J(25,2,.)

. 
.         local row = 1

. 
.         foreach var in any_public any_private {
  2.                 qui sum `var' [aw = hinswt] if tn == 1 & year >= 2001 & year <= 2008
  3.                 matrix sample_stats[`row',1] = r(mean)
  4.                 qui sum `var' [aw = hinswt] if tn == 0 & year >= 2001 & year <= 2008
  5.                 matrix sample_stats[`row',2] = r(mean)
  6.                 local row = `row' + 1
  7.         }

. 
.         local row = `row' + 1

. 
.         foreach var in working hrs_lw_lt20 hrs_lw_2035 hrs_lw_ge35 {
  2.                 qui sum `var' [aw = wtsupp] if tn == 1 & year >= 2000 & year <= 2007
  3.                 matrix sample_stats[`row',1] = r(mean)
  4.                 qui sum `var' [aw = wtsupp] if tn == 0 & year >= 2000 & year <= 2007
  5.                 matrix sample_stats[`row',2] = r(mean)
  6.                 local row = `row' + 1
  7.         }

. 
.         local row = `row' + 1

. 
.         foreach var in kid agebin female {
  2.                 qui sum `var' [aw = wtsupp] if tn == 1 & year >= 2000 & year <= 2007
  3.                 matrix sample_stats[`row',1] = r(mean)
  4.                 qui sum `var' [aw = wtsupp] if tn == 0 & year >= 2000 & year <= 2007
  5.                 matrix sample_stats[`row',2] = r(mean)
  6.                 local row = `row' + 1
  7.         }

. 
.         local row = `row' + 1

. 
.         foreach var in hsd hsg any_college {
  2.                 qui sum `var' [aw = wtsupp] if tn == 1 & year >= 2000 & year <= 2007
  3.                 matrix sample_stats[`row',1] = r(mean)
  4.                 qui sum `var' [aw = wtsupp] if tn == 0 & year >= 2000 & year <= 2007
  5.                 matrix sample_stats[`row',2] = r(mean)
  6.                 local row = `row' + 1
  7.         }

. 
.         local row = `row' + 1

. 
.         foreach var in white black other {
  2.                 qui sum `var' [aw = wtsupp] if tn == 1 & year >= 2000 & year <= 2007
  3.                 matrix sample_stats[`row',1] = r(mean)
  4.                 qui sum `var' [aw = wtsupp] if tn == 0 & year >= 2000 & year <= 2007
  5.                 matrix sample_stats[`row',2] = r(mean)
  6.                 local row = `row' + 1
  7.         }

. 
.         clear

.         svmat sample_stats
number of observations will be reset to 25
Press any key to continue, or Break to abort
Number of observations (_N) was 0, now 25.

.         list , clean

       sample~1   sample~2  
  1.   .1889924   .1211175  
  2.   .6177418   .6144263  
  3.          .          .  
  4.   .6890013   .7083271  
  5.   .0408385   .0354058  
  6.   .0971391    .093778  
  7.   .5510237   .5791433  
  8.          .          .  
  9.   .4426971   .4539456  
 10.   .5487842   .5345677  
 11.   .5213946   .5169719  
 12.          .          .  
 13.   .1614842    .160256  
 14.   .3746987   .3490423  
 15.   .4638171   .4907017  
 16.          .          .  
 17.   .8116335   .7756209  
 18.     .16778   .1868347  
 19.   .0205865   .0375443  
 20.          .          .  
 21.          .          .  
 22.          .          .  
 23.          .          .  
 24.          .          .  
 25.          .          .  

. 
. restore

. 
. ** We drop variables here that were only used
. ** for this one sample statistics table.
. drop race smc1 smc2 col hsd hsg 

. 
. ************************************************************
. **   Table II, difference-in-difference
. ************************************************************
. 
.  {
.         disp "The time is now: $S_TIME, $S_DATE"
The time is now: 12:56:49, 23 Feb 2024
.         preserve
. 
.                 keep if age >= 21 & age < 65
(276,835 observations deleted)
.                 keep if south == 1
(1,087,789 observations deleted)
.                 global Nclusters = 17
. 
.                 matrix reg_results = J(8, 7, .)
. 
.                 qui do fragment-run-our-bbs-procedure dd any_public 1 2000 2007 
.                 qui do fragment-run-our-bbs-procedure dd working 2 2000 2007 
.                 qui do fragment-run-our-bbs-procedure dd hrs_lw_lt20 3 2000 2007 
.                 qui do fragment-run-our-bbs-procedure dd hrs_lw_ge20 4 2000 2007 
.                 qui do fragment-run-our-bbs-procedure dd hrs_lw_2035 5 2000 2007 
.                 qui do fragment-run-our-bbs-procedure dd hrs_lw_ge35 6 2000 2007 
.                 qui do fragment-run-our-bbs-procedure dd any_empl_wk 7 2000 2007 
. 
.                 clear
.                 svmat reg_results
number of observations will be reset to 8
Press any key to continue, or Break to abort
Number of observations (_N) was 0, now 8.
.                 list, clean

       reg_res~1   reg_re~2   reg_res~3   reg_re~4   reg_re~5   reg_re~6   reg_re~7  
  1.   -.0424241   .0230268   -.0023687   .0253954   .0005266   .0248688   .0073297  
  2.    .0096932   .0089487    .0039276   .0089703   .0069882   .0148218   .0107094  
  3.    .0007492   .0231531    .5568231   .0141618   .9410782   .1172386   .5057287  
  4.           .          .           .          .          .          .          .  
  5.    .8611147   .8503174    .3982495   .8311024   .3358212    .826556   .8702459  
  6.         112        112         112        112        112        112        112  
  7.           .          .           .          .          .          .          .  
  8.    .1405285   .6962405    .0364541   .6597865   .0945439   .5652426   .5036987  
. 
.         restore
.         disp "The time is now: $S_TIME, $S_DATE"
The time is now: 13:01:56, 23 Feb 2024
. }

. 
. ************************************************************
. **   Table II, triple-difference
. ************************************************************
. 
.  {
. 
.         disp "The time is now: $S_TIME, $S_DATE"
The time is now: 13:01:56, 23 Feb 2024
.         preserve
. 
.                 keep if age >= 21 & age < 65
(276,835 observations deleted)
.                 keep if south == 1
(1,087,789 observations deleted)
.                 global Nclusters = 17
. 
.                 sum year

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
        year |    391,341    2005.393    4.148632       1998       2012
. 
.                 matrix reg_results = J(8, 7, .)
. 
.                 qui do fragment-run-our-bbs-procedure ddd any_public 1 2000 2007
.                 qui do fragment-run-our-bbs-procedure ddd working 2 2000 2007
.                 qui do fragment-run-our-bbs-procedure ddd hrs_lw_lt20 3  2000 2007
.                 qui do fragment-run-our-bbs-procedure ddd hrs_lw_ge20 4 2000 2007
.                 qui do fragment-run-our-bbs-procedure ddd hrs_lw_2035 5  2000 2007
.                 qui do fragment-run-our-bbs-procedure ddd hrs_lw_ge35 6 2000 2007
.                 qui do fragment-run-our-bbs-procedure ddd any_empl_wk 7 2000 2007
. 
.                 clear
.                 svmat reg_results
number of observations will be reset to 8
Press any key to continue, or Break to abort
Number of observations (_N) was 0, now 8.
.                 list, clean

       reg_res~1   reg_re~2   reg_re~3   reg_re~4   reg_re~5   reg_re~6   reg_re~7  
  1.   -.0740375   .0453214   .0022345   .0430869   .0171895   .0258974   .0416711  
  2.    .0155018   .0192254    .006876    .015472    .011693    .024749   .0418939  
  3.    .0003621   .0347454   .7503751   .0154724   .1653276   .3144419   .3380456  
  4.           .          .          .          .          .          .          .  
  5.    .9343014   .9539046   .6500779     .94276   .8387988   .9270837   .9316843  
  6.         224        224        224        224        224        224        224  
  7.           .          .          .          .          .          .          .  
  8.    .1392032   .6990721   .0366604   .6624116    .095488   .5669236   .5054883  
. 
.         restore
.         disp "The time is now: $S_TIME, $S_DATE"
The time is now: 13:09:14, 23 Feb 2024
. }

. 
. 
. 
end of do-file

. log close
      name:  <unnamed>
       log:  C:\Users\Genna\OneDrive\Documents\ECON 580 Replication\ggn-replication-kit\do\../log/run-cps-main-tables-piece-.log
  log type:  text
 closed on:  23 Feb 2024, 13:09:21
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
